% operators that are separated from the operand by a space % operators that require brackets % operators that require parentheses % Paper specific The asymptotic optimality theorem for minimax we proved previously was formulated in terms of the "optimal value" v ( x ) . Compared to the Bayesian case, v ( x ) has the strange property that its definition depends on rewards other than those received after observing x . This is a direct consequence of the dynamic inconsistency of minimax. In an attempt to get around this, we show that the minimax decision rule is dynamically consistent in a certain special case and demonstrate that this special case can occur often for a natural class of models. However, this doesn't immediately solve the problem: doing so requires replacing the minimax decision rule by a stronger condition that ensures subgame perfection in some sense. The formalization of the latter idea is left for future posts. Appendix A contains the proofs of all results. ##Notation Given X a topological space, P ( X ) will denote the space of Borel probability measures on X . We regard it as a topological space using the weak ∗ topology. Given x ∈ X , δ x ∈ P ( X ) is defined by δ x ( A ) : = [ [ x ∈ A ] ] . Given μ , ν ∈ P ( X ) , d tv ( μ , ν ) stands for the total variation distance between μ and ν . We denote P C ( X ) the set of non-empty convex compact subsets of P ( X ) . Given X a finite set, X ∗ denotes the set of finite strings in alphabet X , i.e. X ∗ : = ⨆ n ∈ N X n . X ω denotes the set of infinite strings in alphabet X . Given x ∈ X ∗ ⊔ X ω , | x | ∈ N ⊔ { ∞ } is the length of string. Given 0 ≤ n < | x | , x n ∈ X is the n -th symbol in x . Given 0 ≤ n ≤ | x | , x < n is the prefix of x of length n . Given x , y ∈ X ∗ ⊔ X ω , the notations x ⊏ y , x ⊑ y , x ⊏ / y and x ⋢ y mean " x is a proper prefix of y ", " x is a prefix of y " and their negations. λ X ∈ X ∗ is the empty string and X + : = X ∗ ∖ λ X . ##Factorization We recall the result of the previous post regarding subagents of minimax agents: #Proposition 0 π ∗ 2 ∈ a r g m a x π 2 : T → P ( S 2 ) min μ ∈ Φ ( E π ∗ 1 × μ [ u 1 ] + μ ( A ) E t ∼ α ∗ π ∗ 1 [ E π 2 ( t ) × μ ∣ A [ u 2 ( t ) ] ] ) In general, π ∗ 2 is not a minimax policy for any natural model i.e. the minimax decision rule is not "dynamically consistent". However, if we assume a certain factorization condition, it is. Specifically, assume E 1 , E 2 are compact Polish, f : E 1 × E 2 → E is Borel measurable, ¯ u 1 : S 1 × E 1 → R and ¯ u 2 : S 2 × T × E 2 → R are continuous s.t. u 1 ( s 1 , f ( e 1 , e 2 ) ) = ¯ u 1 ( s 1 , e 1 ) u 2 ( s 2 , t , f ( e 1 , e 2 ) ) = ¯ u 1 ( s 2 , t , e 2 ) Further assume that A 1 ⊆ E 1 is Borel s.t. f − 1 ( A ) = A 1 × E 2 and Φ 1 , 2 ∈ P C ( E 1 , 2 ) are s.t. Φ is the closure of the convex hull of f ∗ ( Φ 1 × Φ 2 ) . #Proposition 1 Assume that min μ ∈ Φ 1 μ 1 ( A 1 ) > 0 . Then, π ∗ 2 ∈ a r g m a x π 2 : T → P ( S 2 ) min μ ∈ Φ 2 E t ∼ α ∗ π ∗ 1 [ E π 2 ( t ) × μ [ ¯ u 2 ( t ) ] ] Moreover, define ¯ S 2 : = T → S 2 equipped with the product topology, define ¯ π ∗ 2 ∈ P ( ¯ S 2 ) by ¯ π ∗ 2 : = ∏ t ∈ T π ∗ 2 ( t ) Define ¯ E 2 : = T × E 2 and define ¯ Φ 2 ∈ P C ( ¯ E 2 ) by ¯ Φ 2 : = { α ∗ π ∗ 1 × μ ∣ μ ∈ Φ 2 } Finally, define ^ u 2 : ¯ S 2 × ¯ E 2 → R by ^ u 2 ( s , t , e ) : = ¯ u 2 ( s ( t ) , t , e ) Then, ¯ π ∗ 2 is a minimax policy for ¯ Φ 2 w.r.t. the utility function ^ u 2 . ##Factorization everywhere We now formulate a condition that ensures that factorizations happens "often" in a certain sense. #Definition 1 Consider Φ ∈ P C ( O ω ) and x ∈ O ∗ . Define f x : O ω × O ω → O ω by f x ( e 1 , e 2 ) : = { e 1 if x ⊏ / e 1 x e 2 if x ⊏ e 1 Φ is said to factorize at x when there are Φ 1 , Φ 2 ⊆ P ( O ω ) s.t. Φ is the closure of the convex hull of f x ∗ ( Φ 1 × Φ 2 ) . Given e ∈ O ω , Φ is said to factorize over e when there are infinitely many n ∈ N s.t. Φ factorizes at e < n . Given a time discount function γ , Φ is said to factorize frequently over e (w.r.t. γ ) when there is an increasing sequence { n k ∈ N } k ∈ N s.t. i. Φ factorizes at e < n k for all k . ii. There is ϵ > 0 s.t. for all k ∑ ∞ n = n k + 1 − 1 γ ( n ) ∑ ∞ n = n k γ ( n ) > ϵ For example, for geometric discount ( γ ( n ) = β n ) , condition ii means that n k + 1 − n k is bounded. Φ is said to factorize everywhere when ∀ μ ∈ Φ : Pr e ∼ μ [ Φ factorizes over e ] = 1 Φ is said to factorize frequently everywhere (w.r.t. γ ) when ∀ μ ∈ Φ : Pr e ∼ μ [ Φ factorizes frequently over e ] = 1 Note that any singleton { μ } factorizes frequently everywhere w.r.t. any time discount function. More generally, we can give the following explicit description of models that factorize everywhere: #Construction Consider some F : O ∗ → P C ( O + ) ( O + is considered to be a discrete space). Assume that for any x ∈ O , there is A x ⊆ O + prefix-free s.t. any μ ∈ F ( x ) is supported on A x . We define X F ⊆ O ∗ as the minimal set with the following properties: i. λ O ∈ X F ii. If x ∈ X F , μ ∈ F ( x ) and y ∈ O + is s.t. μ ( y ) > 0 , then x y ∈ X F . We define Φ F ⊆ P ( O ω ) as follows. μ ∈ Φ F iff for any x ∈ X F , there is μ x ∈ F ( x ) s.t. for any y ∈ O + , if μ x ( y ) > 0 then Pr e ∼ μ [ x y ⊏ e ] = Pr e ∼ μ [ x ⊏ e ] μ x ( y ) #Proposition 2 For any F as above, Φ F ∈ P C ( O ω ) and factorizes everywhere. It is also easy to use the above construction to get Φ that factorizes frequently everywhere w.r.t. given γ (for example, if we require that for every x ∈ X F , F ( x ) is supported on strings of uniformly bounded length, Φ F will factorize frequently everywhere w.r.t. geometric discount; this condition on F is sufficient but not necessary). We now formulate the optimality condition that we would like to hold (but for which minimax is unfortunately insufficent). Consider again Φ , Ψ and π ∗ as before. Define u > n : O ω × ( O ∗ → A ) → R to be normalized sum of rewards from time n , i.e. u > n ( s , e ) : = ∑ m > n γ ( m ) r ( e s < m ) ∑ m > n γ ( m ) Define w : O ∗ → R by w ( x ) : = max ρ ∈ A | x | → P ( O ∗ → A ) min μ ∈ Φ E s ∼ π ∗ ⊗ x ρ e ∼ μ [ u > | x | ( s , e ) ∣ x ⊏ e ] #Hypothesis If π ∗ satisfies the (yet unformulated) subgame perfection condition, we should have the following: Assume Φ factorizes everywhere. Then, ∀ μ ∈ Φ : Pr e ∼ μ [ lim inf n → ∞ max ( w ( e < n ) − E s ∼ π ∗ e ′ ∼ μ [ u > n ( s , e ′ ) ∣ e < n ⊏ e ′ ] , 0 ) = 0 ] = 1 Moreover, if Φ factorizes frequently everywhere, then ∀ μ ∈ Φ : Pr e ∼ μ [ lim n → ∞ max ( w ( e < n ) − E s ∼ π ∗ e ′ ∼ μ [ u > n ( s , e ′ ) ∣ e < n ⊏ e ′ ] , 0 ) = 0 ] = 1 ##Appendix A #Proof of Proposition 1 Recalling that minimization over Φ can be replaced by minimization over any set s.t. Φ is the closure of its convex hull, and using Proposition 0, we have π ∗ 2 ∈ a r g m a x π 2 : T → P ( S 2 ) min μ 1 ∈ Φ 1 μ 2 ∈ Φ 2 ( E π ∗ 1 × f ∗ ( μ 1 × μ 2 ) [ u 1 ] + ( μ 1 × μ 2 ) ( f − 1 ( A ) ) E t ∼ α ∗ π ∗ 1 [ E π 2 ( t ) × f ∗ ( μ 1 × μ 2 ) ∣ A [ u 2 ( t ) ] ] ) π ∗ 2 ∈ a r g m a x π 2 : T → P ( S 2 ) min μ 1 ∈ Φ 1 μ 2 ∈ Φ 2 ( E π ∗ 1 × μ 1 [ ¯ u 1 ] + μ 1 ( A 1 ) E t ∼ α ∗ π ∗ 1 [ E π 2 ( t ) × μ 2 [ ¯ u 2 ( t ) ] ] ) π ∗ 2 ∈ a r g m a x π 2 : T → P ( S 2 ) min μ 1 ∈ Φ 1 ( E π ∗ 1 × μ 1 [ ¯ u 1 ] + μ 1 ( A 1 ) min μ 2 ∈ Φ 2 E t ∼ α ∗ π ∗ 1 [ E π 2 ( t ) × μ 2 [ ¯ u 2 ( t ) ] ] ) Using the assumption min μ 1 ∈ Φ 1 μ 1 ( A 1 ) > 0 , we get the desired result. Now consider any ¯ π 2 ∈ P ( ¯ S 2 ) . Define π 2 : T → P ( S 2 ) by ( π 2 ( t ) ) ( B ) : = Pr σ ∼ ¯ π 2 [ σ ( t ) ∈ B ] . We have E t ∼ α ∗ π ∗ 1 [ E s ∼ π 2 ( t ) e ∼ μ 2 [ ¯ u 2 ( s , t , e ) ] ] = E t ∼ α ∗ π ∗ 1 [ E σ ∼ ¯ π 2 e ∼ μ 2 [ ¯ u 2 ( σ ( t ) , t , e ) ] ] E t ∼ α ∗ π ∗ 1 [ E s ∼ π 2 ( t ) e ∼ μ 2 [ ¯ u 2 ( s , t , e ) ] ] = E ¯ π 2 × α ∗ π ∗ 1 × μ [ ^ u 2 ] For the special case ¯ π 2 = ¯ π ∗ 2 = ∏ t ∈ T π ∗ 2 ( t ) , we get π 2 = π ∗ 2 and therefore E t ∼ α ∗ π ∗ 1 [ E s ∼ π ∗ 2 ( t ) e ∼ μ 2 [ ¯ u 2 ( s , t , e ) ] ] = E ¯ π ∗ 2 × α ∗ π ∗ 1 × μ [ ^ u 2 ] Using the property of π ∗ 2 , it follows that ∀ μ ∈ Φ 2 : E ¯ π 2 × α ∗ π ∗ 1 × μ [ ^ u 2 ] ≤ E ¯ π ∗ 2 × α ∗ π ∗ 1 × μ [ ^ u 2 ] ∀ ¯ μ ∈ ¯ Φ 2 : E ¯ π 2 × ¯ μ [ ^ u 2 ] ≤ E ¯ π ∗ 2 × ¯ μ [ ^ u 2 ] #Proposition A.0 In the setting of the Construction, consider any μ ∈ Φ F . Then: ∀ x ∈ X F ∃ μ x ∈ F ( x ) ∀ y ∈ A x : μ ( x y O ω ) = μ ( x O ω ) μ x ( y ) #Proof of Proposition A.0 Given x ∈ X F , we know there is μ x ∈ F ( x ) s.t. the identity holds whenever μ x ( y ) > 0 . Summing these identities over y, we get ∑ μ x ( y ) > 0 μ ( x y O ω ) = ∑ μ x ( y ) > 0 μ ( x O ω ) μ x ( y ) ∑ μ x ( y ) > 0 μ ( x y O ω ) = μ ( x O ω ) Since A x is prefix-free, for any y , y ′ ∈ A x we have x y O ω ∩ x y ′ O ω = ∅ . Also, obviously, x y O ω ⊆ x O ω . It follows that ∑ y ∈ A x μ ( x y O ω ) = μ ( ⋃ y ∈ A x x y O ω ) ≤ μ ( x O ω ) = ∑ μ x ( y ) > 0 μ ( x y O ω ) Since μ x ( y ) > 0 implies y ∈ A x , we conclude that for any y ∈ A x , if μ x ( y ) = 0 then μ ( x y O ω ) = 0 . This, together with the property of μ x , gives the desired result. #Proposition A.1 In the setting of the Construction, Φ F is convex. #Proof of Proposition A.1 Consider μ , ν ∈ Φ F and p ∈ ( 0 , 1 ) and define ξ = p μ + ( 1 − p ) ν . Consider some x ∈ X F , and let A x ⊆ O + be as in the Construction. If ξ ( x O ω ) = 0 , we can choose any ξ x ∈ F ( x ) to satisfy the desired condition. Therefore, we can assume ξ ( x O ω ) > 0 . By Proposition A.0, there are μ x , ν x ∈ F ( x ) s.t. for all y ∈ A x : μ ( x y O ω ) = μ ( x O ω ) μ x ( y ) ν ( x y O ω ) = ν ( x O ω ) ν x ( y ) Taking a convex linear combination of these equations, we get ξ ( x y O ω ) = p μ ( x O ω ) μ x ( y ) + ( 1 − p ) ν ( x O ω ) ν x ( y ) ξ ( x y O ω ) = ξ ( x O ω ) p μ ( x O ω ) μ x ( y ) + ( 1 − p ) ν ( x O ω ) ν x ( y ) ξ ( x O ω ) Define ξ x ∈ P ( O + ) by ξ x : = p μ ( x O ω ) ξ ( x O ω ) μ x + ( 1 − p ) ν ( x O ω ) ξ ( x O ω ) ν x ξ x is a convex linear combination of μ x and ν x , therefore ξ x ∈ F ( x ) . We get ξ ( x y O ω ) = ξ ( x O ω ) ξ x ( y ) Therefore, ξ ∈ Φ F . #Proposition A.2 In the setting of the Construction, Φ F is closed. #Proof of Proposition A.2 Consider any sequence { μ n ∈ Φ F } n ∈ N and s.t. μ n → μ for some μ ∈ P ( O ω ) . Consider some x ∈ X F , and let A x ⊆ O + be as in the Construction. By Proposition A.0, for any n ∈ N , there is μ n x ∈ F ( x ) s.t. for any y ∈ A x : μ n ( x y O ω ) = μ n ( x O ω ) μ n x ( y ) Note that P ( O + ) is not compact but is still Polish (since O + is such), and therefore F ( x ) is compact and Polish. Let { n k ∈ N } k ∈ N be an increasing sequence s.t. μ n k x → μ x for some μ x ∈ F ( x ) . For any z ∈ O ∗ , χ z O ω : O ω → { 0 , 1 } is a continuous function, and therefore μ n ( z O ∗ ) → μ ( z O ∗ ) . For any y ∈ O + , χ { y } : O + → { 0 , 1 } is also continuous, and therefore μ n k x ( y ) → μ x ( y ) . Putting these together, we get μ ( x y O ω ) = μ ( x O ω ) μ x ( y ) Therefore μ ∈ Φ F . #Proposition A.3 In the setting of the Construction, consider any x , z ∈ X F , μ ∈ F ( z ) and y ∈ O + s.t. μ ( y ) > 0 . Assume that x ⊏ z y . Then, x ⊑ z . #Proof of Proposition A.3 We prove by induction on | x | . If | x | = 0 , then obviously x ⊑ z . If | x | > 0 , then, by definition of X F , there is x ′ ∈ X F , y ′ ∈ O + and ν ∈ F ( x ′ ) s.t. ν ( y ′ ) > 0 and x = x ′ y ′ . x ′ ⊏ x ⊏ z y , therefore, by the induction hypothesis, x ′ ⊑ z . Assume to the contrary that x ⋢ z . Then, since x ⊏ z y , z ⊏ x = x ′ y ′ . By the induction hypothesis, this implies z ⊑ x ′ . We got z = x ′ . It follows that z y ′ = x ⊏ z y , and therefore y ′ ⊏ y . However, y , y ′ ∈ A z and A z is prefix-free, which is a contradiction. #Proposition A.4 In the setting of the Construction, Φ F is non-empty. #Proof of Proposition A.4 Choose μ x ∈ F ( x ) for each x ∈ X F . Given any z ∈ O + , define p ( z ) ∈ O ∗ as the longest proper prefix of z s.t. p ( z ) ∈ X F . Define θ : O ∗ → [ 0 , 1 ] recursively by θ ( λ O ) : = 1 ∀ z ∈ O + : θ ( z ) : = θ ( p ( z ) ) Pr y ∼ μ p ( z ) [ z ⊑ p ( z ) y ] Consider any z ∉ X F . For any o ∈ O , p ( z o ) = p ( z ) , therefore: θ ( z o ) = θ ( p ( z ) ) Pr y ∼ μ p ( z ) [ z o ⊑ p ( z ) y ] ∑ o ∈ O θ ( z o ) = θ ( p ( z ) ) ∑ o ∈ O Pr y ∼ μ p ( z ) [ z o ⊑ p ( z ) y ] ∑ o ∈ O θ ( z o ) = θ ( p ( z ) ) Pr y ∼ μ p ( z ) [ z ⊏ p ( z ) y ] For any y s.t. μ p ( z ) ( y ) > 0 , p ( z ) y ∈ X F and therefore z ≠ p ( z ) y . It follows that z ⊏ p ( z ) y iff z ⊑ p ( z ) y , and we get ∑ o ∈ O θ ( z o ) = θ ( z ) Now, consider z ∈ X F . For any o ∈ O , p ( z o ) = z , therefore: θ ( z o ) = θ ( z ) Pr y ∼ μ z [ z o ⊑ z y ] ∑ o ∈ O θ ( z o ) = θ ( z ) ∑ o ∈ O Pr y ∼ μ z [ z o ⊑ z y ] Again we get ∑ o ∈ O θ ( z o ) = θ ( z ) It follows that there is μ ∈ P ( O ω ) s.t. for any z ∈ O ∗ , μ ( z O ω ) = θ ( z ) . Consider any x ∈ X F and y 0 ∈ O + s.t. μ x ( y 0 ) > 0 . p ( x y 0 ) ⊏ x y 0 and by Proposition\ A.13, this implies p ( x y 0 ) ⊑ x . By definition of p , it follows that p ( x y 0 ) = x . We get θ ( x y 0 ) = θ ( p ( x y 0 ) ) Pr y ∼ μ p ( x y 0 ) [ x y 0 ⊑ p ( x y 0 ) y ] θ ( x y 0 ) = θ ( x ) Pr y ∼ μ x [ x y 0 ⊑ x y ] θ ( x y 0 ) = θ ( x ) Pr y ∼ μ x [ y 0 ⊑ y ] y 0 ∈ A x and any y ∈ O + s.t. μ x ( y ) > 0 is also in A x . A x is prefix-free, so y 0 ⊑ y iff y 0 = y . We get θ ( x y 0 ) = θ ( x ) μ x ( y 0 ) μ ( x y 0 O ω ) = μ ( x O ω ) μ x ( y 0 ) Therefore, μ ∈ Φ F . #Proposition A.5 Consider x ∈ O ∗ and let f x : O ω × O ω → O ω be defined as in Definition 1. Then, for any y ∈ O ∗ : ( f x ) − 1 ( x y O ω ) = x O ω × y O ω #Proof of Proposition A.5 Given any e 1 , e 2 ∈ O ω , f x ( x e 1 , y e 2 ) = x y e 2 . On the other hand, if e 1 , e 2 , e 3 ∈ O ω are s.t. f x ( e 1 , e 2 ) = x y e 3 then x ⊏ e 1 and e 2 = y e 3 . #Proposition A.6 Consider x ∈ O ∗ and let f x : O ω × O ω → O ω be defined as in Definition 1. Then, for any z ∈ O ∗ , if x ⊏ / z , then: ( f x ) − 1 ( z O ω ) = z O ω × O ω #Proof of Proposition A.6 Assume x = z w for some w ∈ O ∗ . For any e 1 , e 2 ∈ O ω , f x ( z e 1 , e 2 ) is either z e 1 (if w ⊏ / e 1 ) or x e 2 = z w e 2 (if w ⊏ e 1 ). Either way, z ⊏ f x ( z e 1 , e 2 ) . On the other hand, if e 1 , e 2 , e 3 ∈ O ω are s.t. f x ( e 1 , e 2 ) = z e 3 then either x ⊏ / e 1 and e 1 = z e 3 or z w = x ⊏ e 1 . Either way, z ⊏ e 1 . Now, assume x ⋣ z . For any e 1 , e 2 ∈ O ω , f x ( z e 1 , e 2 ) = z e 1 (since x ⊏ / z e 1 ). On the other hand, if e 1 , e 2 , e 3 ∈ O ω are s.t. f x ( e 1 , e 2 ) = z e 3 then e 1 = z e 3 (since x ⊏ / z e 3 ). #Proposition A.7 In the setting of the Construction, consider some x ∈ X F and define G : O ∗ → P C ( O + ) by G ( z ) : = F ( x z ) . Assume that w ∈ O ∗ is s.t. x w ∈ X F . Then, w ∈ X G . #Proof of Proposition A.7 We prove by induction on | w | . For | w | = 0 , the proposition is obvious. Assume | w | > 0 . x w ∈ X F , therefore x w = x ′ y for some x ′ ∈ X F , μ ∈ F ( x ′ ) and y ∈ O + s.t. μ ( y ) > 0 . x ⊏ x ′ y , therefore, by Proposition A.3, x ⊑ x ′ . Let z ∈ O ∗ be s.t. x ′ = x z . x w = x ′ y = x z y , therefore w = z y and we can use the induction hypothesis to show that z ∈ X G . μ ∈ F ( x ′ ) = F ( x z ) = G ( z ) , implying that w ∈ X G . #Proposition A.8 In the setting of the Construction, consider some x ∈ X F and define G : O ∗ → P C ( O + ) by G ( z ) : = F ( x z ) . Consider any w ∈ X G . Then, x w ∈ X F . #Proof of Proposition A.8 We prove by induction on | w | . For | w | = 0 , the proposition is obvious. Assume that | w | > 0 . Then, there is some w ′ ∈ X G , μ ∈ G ( w ′ ) = F ( x w ′ ) and y ∈ O + s.t. μ ( y ) > 0 and w = w ′ y . By the induction hypothesis, x w ′ ∈ X F . Therefore, x w = x w ′ y is also in X F . #Proposition A.9 In the setting of the Construction, Φ F factorizes at x for any x ∈ X F . #Proof of Proposition A.9 Fix x ∈ X F . Let f x be as in Definition 1. Define G : O ∗ → P C ( O + ) by G ( z ) : = F ( x z ) . We claim that Φ F = f x ∗ ( Φ F × Φ G ) . Consider any μ ∈ Φ F , ν ∈ Φ G and denote ξ : = f x ∗ ( μ × ν ) . Consider some z ∈ X F and A z ⊆ O + corresponding. Assume z = x w for some w ∈ O ∗ . By Proposition A.7, w ∈ X G . Note that for any ν 0 ∈ G ( w ) = F ( z ) , ν 0 ( y ) > 0 implies y ∈ A z . Let ν w ∈ P ( O + ) be as in Proposition A.0. For any y ∈ A z , we have ν ( w y O ω ) = ν ( w O ω ) ν w ( y ) Multiplying both sides by μ ( x O ω ) : μ ( x O ω ) ν ( w y O ω ) = μ ( x O ω ) ν ( w O ω ) ν w ( y ) Using the definition of ξ and Proposition A.5, we get ξ ( z O ω ) = μ ( x O ω ) ν ( w O ω ) ξ ( z y O ω ) = μ ( x O ω ) ν ( w y O ω ) Combining, we get ξ ( z y O ω ) = ξ ( z O ω ) ν w ( y ) Now, assume x ⋢ z . Let μ z ∈ P ( O + ) be as in Proposition A.0. For any y ∈ O + s.t. μ z ( y ) > 0 , we have μ ( z y O ω ) = μ ( z O ω ) μ z ( y ) Using the definition of ξ and Proposition A.6, we get ξ ( z O ω ) = μ ( z O ω ) By Proposition A.3, x ⊏ / z y . Therefore, we can use Proposition A.6 again to conclude ξ ( z y O ω ) = μ ( z y O ω ) Combining, we get ξ ( z y O ω ) = ξ ( z O ω ) μ z ( y ) We proved that ξ ∈ Φ F . It remains to show that, conversely, μ ∈ f x ∗ ( Φ F × Φ G ) . Define μ x ∈ P ( O ω ) as follows. If μ ( x O ω ) = 0 , choose arbitrary μ x ∈ Φ G . If μ ( x O ω ) > 0 , define μ x by μ x ( z O ω ) : = μ ( x z O ω ) μ ( x O ω ) Consider any w ∈ X G . By Proposition A.8, x w ∈ X F . By Proposition A.0, there is μ x w ∈ F ( x w ) s.t. for any y ∈ A x w : μ ( x w y O ω ) = μ ( x w O ω ) μ x w ( y ) If μ ( x O ω ) > 0 , we can divide both sides by μ ( x O ω ) and get μ x ( w y O ω ) = μ x ( w O ω ) μ x w ( y ) It follows that, in either case, μ x ∈ Φ G and μ ( x O ω ) μ x ( z O ω ) = μ ( x z O ω ) Denote ξ : = f x ∗ ( μ × μ x ) . Consider any z ∈ O ∗ . Assume z = x w for some w ∈ O ∗ . By Proposition A.5 ξ ( z O ω ) = μ ( x O ω ) μ x ( w O ω ) = μ ( z O ω ) Now, assume x ⋢ z . By Proposition A.6 ξ ( z O ω ) = μ ( z O ω ) We conclude that μ = ξ . #Proposition A.10 In the setting of the construction, consider any μ ∈ Φ F and e ∈ O ω s.t. for any n ∈ N , μ ( e < n O ω ) > 0 . Then, there are infinitely many x ∈ X F s.t. x ⊏ e . #Proof of Proposition A.10 We prove by induction on n that there are at least n prefixes of e in X F . For n = 0 the claim is vacuously true. Consider any n > 0 . By the induction hypothesis, there are x 0 ⊏ x 1 ⊏ … ⊏ x n − 1 ⊏ e s.t. x k ∈ X F for all k < n . Without loss of generality, we can assume A x n − 1 is s.t. ⋃ y ∈ A x n − 1 y O ω = O ω Indeed, if this condition is false we can make it true by adding more elements to A x n − 1 . By Proposition A.0, there is ν ∈ F ( x n − 1 ) s.t. for any y ∈ A x n − 1 μ ( x n − 1 y O ω ) = μ ( x n − 1 O ω ) ν ( y ) By the assumption on A x n − 1 , there is y 0 ∈ A x n − 1 s.t. x n − 1 y 0 ⊏ e . Denote x n : = x n − 1 y 0 . We get μ ( x n O ω ) = μ ( x n − 1 O ω ) ν ( y 0 ) The left hand side is positive since x n ⊏ e , therefore ν ( y 0 ) > 0 .\ It follows that x n ∈ X F . #Proof of Proposition 2 By Propositions A.1, A.2 and A.4, Φ F ∈ P C ( O ω ) . It remains to show that Φ F factorizes everywhere. Consider any μ ∈ Φ F . Denote N : = { e ∈ O ω ∣ ∃ n ∈ N : μ ( e < n O ω ) = 0 } We have N = ⋃ x ∈ O ∗ μ ( x O ω ) = 0 x O ω Therefore, μ ( N ) = 0 and μ ( O ω ∖ N ) = 1 . By Proposition A.10, for any e ∉ N , there are infinitely many x ⊏ e s.t. x ∈ X F . By Proposition A.9, it follows that Φ F factorizes over e . We get Pr e ∼ μ [ Φ F factorizes over e ] ≥ Pr e ∼ μ [ e ∉ N ] = 1