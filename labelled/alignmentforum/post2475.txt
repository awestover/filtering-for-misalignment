I've defined generalised models M as being given by F , a set of features, and an (unnormalised) probability distribution Q over W = 2 ¯ ¯¯ ¯ F , the set of possible worlds defined by the all values of those features. To make these into a category, a morphism r between M 0 = ( F 0 , Q 0 ) and M 1 = ( F 1 , Q 1 ) was defined to be a relation r between W 0 and W 1 (ie a subset of W 0 × W 1 ), that obeyed certain conditions with respect to the Q 's. If r obeys those conditions, we can construct the " underlying model " for the morphism, a generalised model M r = ( F 0 ⊔ F 1 , Q r ) , with Q r non-zero only on r ∈ W 0 × W 1 . That underlying model result basically says: There is an underlying reality M r of which M 0 and M 1 are different, consistent, facets. That's well and good, but we also want to allow imperfect correspondences, where Q 0 or Q 1 (or both) might be known to be in error. After all, when we transitioned from Newtonian mechanics to relativity, it wasn't because there was an underlying reality that both were facets of. Instead, we realised that Newtonian mechanics and relativity were approximately though not perfectly equivalent in low-energy situations, and that when they diverged, relativity was overall more accurate. We'd want to include these cases as generalised model, and measure how "imperfect" the morphism between them is, i.e. how much Q 0 and Q 1 diverge from being in perfect correspondence. We'll also look at how the Q and the feature sets are related - how much information Q caries relative to F . Imperfect morphisms So we'll loosen the definition of "morphisms" so that the Q 0 and Q 1 need not correspond exactly to each other or an underlying reality. If we have a relation r between W 0 and W 1 , here are different Q -consistency requirements that we could put on r to make it into a morphism (the previous requirement has been renamed " Q -preserving", condition 5): General binary relations r ; no connection assumed between r and the Q s. Q -relational: for all w 0 ∈ W 0 with Q 0 ( w 0 ) > 0 , there exists at least one w 1 ∈ W 1 with both Q 1 ( w 1 ) > 0 and ( w 0 , w 1 ) ∈ r . Q -functional: for all w 0 ∈ W 0 with Q 0 ( w 0 ) > 0 , there exists a unique w 1 ∈ W 1 with both Q 1 ( w 1 ) > 0 and ( w 0 , w 1 ) ∈ r . Q -birelational: r and r − 1 are both Q -relational. Q -preserving: the same conditions as presented here . For all w 0 ∈ W 0 and w 1 ∈ W 1 , Q 0 ( w 0 ) ≤ Q 1 ( r ( w 0 ) ) and Q 1 ( w 1 ) ≤ Q 0 ( r − 1 ( w 1 ) ) . Q -isomorphic: r is Q -preserving; both r and r − 1 are Q -functional. The general results about these morphisms classes are (proof found in this footnote [1] ): All the above conditions are associative (hence define classes of morphisms for different categories with the same objects): if r and p are Q -relational, Q -functional, Q -relational, Q -birelational, Q -preserving, Q -isomorphic or disconnected from Q entirely, then so is p r = p ∘ r . Every morphism fulfils the conditions of the morphisms above it on the list, except that Q -preserving and Q -birelational need not imply Q -functional. If r is Q -isomorphic, then we can pair up each non-measure zero elements w 0 ∈ W 0 and w 1 ∈ W 0 so that ( w 0 , w 1 ) ∈ r and Q 0 ( w 0 ) = Q 1 ( w 1 ) . Examples of morphisms Here are four relations: A coarsening is when multiple worlds get related to a single world, thus losing details. A refinement is the opposite: a single world gets related to multiple worlds, thus adding more details. An inclusion adds more worlds to the set. Its opposite, a restriction, removes worlds. In terms of morphisms, if we assume that all the worlds in those sets have non-zero probability, then coarsenings, refinements, and inclusions are all Q -relational and Q -functional. Restrictions are neither. Coarsenings and refinements are Q -birelational, while inclusions and restrictions are not. As for Q -preserving, coarsenings are Q -preserving if, for all w 1 ∈ W 1 , the sum of Q 0 ( w 0 ) for all ( w 0 , w 1 ) ∈ r , is equal to Q 1 ( w 1 ) . Similarly, refinements are Q -preserving if, for all w 0 ∈ W 0 , the sum of the Q 1 ( w 1 ) for all ( w 0 , w 1 ) ∈ r , is equal Q 0 ( w 0 ) . None of these four relations are Q -isomorphic (unless some of the worlds in the diagrams are of measure 0 ). What about Bayesian updates ? If we start with M 0 = ( { f } ⊔ F , Q 0 ) and want to update on f = c for some constant c , then this corresponds to relating M 0 to M 1 = { F , Q 1 } such that ( w 0 , w 1 ) ∈ r if w 0 = ( w 1 , f = c ) . We'll also require Q 0 ( w 0 ) = Q 1 ( w 1 ) on any such worlds - and assume that that defines Q 1 entirely (we're ignoring renormalisation here, since we don't assume that Q 0 and Q 1 have measure 1 ). This r is clearly a restriction, and hence does not meet any of the Q -consistency conditions. However, we can define Bayesian updates as relations r such that r − 1 is Q -functional and injective. They do form a category when seen this way (since ( r q ) − 1 = q − 1 r − 1 ). Comparing the Q 's Given two generalised models M 0 = ( F 0 , Q 0 ) and M 1 = ( F 1 , Q 1 ) , with a relation r between them, we'll now compare Q 0 and Q 1 . We'll do this by defining a length operator L that gives the "length" of r , which is a measure of the divergence between Q 0 and Q 1 "along" the relation r . Let ( Q ′ 0 , Q ′ 1 ) be a pair of probability distributions on W 1 and W 1 , respectively. We'll say the pair is r -compatible if r is a Q -preserving morphism between ( F 0 , Q ′ 0 ) and ( F 1 , Q ′ 1 ) . Since Q i and Q ′ i are distributions over the same W i , we can compare their l 1 norm , defined as: | | Q i − Q ′ i | | 1 = ∑ w i ∈ W i | Q i ( w i ) − Q ′ i ( w i ) | . Then define L ( r , Q ′ 0 , Q ′ 1 ) as the sum of the l 1 -distances to Q 0 and Q 1 : L ( r , Q ′ 0 , Q ′ 1 ) = | | Q 0 − Q ′ 0 | | 1 + | | Q 1 − Q ′ 1 | | 1 . We'll define L ( r ) to be the minimum [2] value of this norm among all the r -compatible ( Q ′ 0 , Q ′ 1 ) . Because of its definition, it's immediately obvious that L ( r ) = L ( r − 1 ) . The other key properties - proved here [3] - are that: If r is Q -relational, then there exists a Q ′ 1 such that L ( r ) = L ( r , Q 0 , Q ′ 1 ) ; ie we can use Q 0 itself rather than finding a Q ′ 0 . If r and p are Q -birelational, the L is a sensible length operator, in that L ( p r ) ≤ L ( r ) + L ( p ) . r is Q -preserving iff L ( r ) = 0 . It's that last property that makes L such a useful distance metric: it measures the extent to which M 0 and M 1 fail to be aspects of the same underlying reality. Relating features and probability distributions In the above we've been looking at the relationship between r and Q , but have looked little at the features. Here we'll look at some of the relations between features and probability distributions. The idea is to measure how related the features are to each other. There are several candidates for a measure of this types, but the most interesting seems to be a generalisation of mutual information . For any feature F ∈ F , we have the marginal distribution Q F of Q over the feature F . Then if H is the informational entropy of a probability distribution/random variable, we can define a measure over Q given F as: − H ( Q ) + ∑ F ∈ F H ( Q F ) . If we define Q F as the product distribution ∏ F ∈ F Q F , then that can also be defined as D K L ( Q | | Q F ) , where D K L is the KL-divergence from Q F to Q . Example: gas laws As an illustration, consider the ideal gas laws: P V = n R T , where P is pressure, V is volume, n is the amount of substance, R is the ideal gas constant, and T is the temperature. We'll consider a simple model with constant amount of substance, setting n R = 1 , so the law reduces to: P V = T We'll allow these variables to take a few values: P and V are integers that range from 1 to 4 , while T is an integer that ranges from 1 to 16 . The probability distribution Q will give uniform probability [4] 1 / 16 to each ( P = p , V = v , T = p v ) . In this case, Q is uniform among the 16 worlds where it is non-zero; hence H ( Q ) = log 2 ( 16 ) = 4. This characterises Q , but doesn't touch the features F . So, let Q P , Q V , and Q P be the marginal distributions over the features. Both Q P and Q V are uniform over 4 elements, so H ( Q P ) = H ( Q V ) = 2 . As for Q T , it is 1 / 16 over { 1 , 9 , 16 } , 2 / 16 over { 2 , 3 , 6 , 8 , 12 } , and 3 / 16 over { 4 } . Some calculations then establish that H ( Q T ) is ( 54 − 3 log 2 ( 3 ) ) / 16 . Then the KL-divergence from Q F = Q V Q P Q T to Q is: D K L ( Q | | Q F ) = − 4 + 2 + 2 + 54 − 3 log 2 ( 3 ) 16 = 54 − 3 log 2 ( 3 ) 16 ≈ 3.08. Let us add another variable T ′ to the feature set, which is just equal to T , but with another name, and see how things change. Then H ( Q ) is unchanged, and D K L ( Q | | Q F ) adds another 54 − 3 log 2 ( 3 ) 16 , corresponding to H ( T ′ ) . We've already shown that Q -preserving morphisms are associative . The composition of general binary relations is known to be associative too . So now assume that r : M 0 → M 1 and p : M 1 → M 2 are both Q -relational. Let w 0 ∈ W 0 be such that Q 0 ( w 0 ) > 0 . Then, because r is Q -relational, there exists a w 1 ∈ W 0 with Q 1 ( w 1 ) > 0 and ( w 0 , w 1 ) ∈ r . Then since p is Q -relational, there exists a w 2 ∈ W 2 with Q 2 ( w 2 ) > 0 and ( w 1 , w 2 ) ∈ p . Combining the two gives ( w 0 , w 2 ) ∈ p r . Thus Q -relational morphisms are associative. Applying the same argument to r − 1 shows that Q -birelational morphisms are also associative. A variant of the same argument with "there exists a unique w 1 ∈ W 0 " instead of "there exists a w 1 ∈ W 0 " shows that Q -functional morphisms are also associative. Hence Q -isomorphic r are also functional. Now assume that r is Q -preserving and let w 0 ∈ W 0 be such that Q 0 ( w 0 ) > 0 . Then there exists an underlying model M r = ( F 0 ⊔ F 1 , Q r ) such that Q 0 ( w 0 ) = ∑ ( w 0 , w 1 ) ∈ r Q r ( w 0 , w 1 ) . Since this sum is greater than zero, there exists a w 1 such that Q r ( w 0 , w 1 ) > 0 . Then since Q 1 ( w 1 ) = ∑ ( w ′ 0 , w 1 ) ∈ r Q r ( w ′ 0 , w 1 ) and all the terms are non-negative, Q 1 ( w 1 ) > 0 . The same argument works if we started with a w 1 ∈ W 1 such that Q 0 ( w 1 ) > 0 ; thus r must be Q -birelational. This proves that Q -preserving implies Q -birelational. It's trivial that Q -birelational implies Q -relational, and that Q -functional also implies Q -relational, since "exists a unique " is strictly stronger than "exists a". By definition, Q -isomorphic implies Q -preserving (hence Q -birelational and Q -relational) and Q -functional. Now let r be Q -isomorphic, and let w 0 be such that Q 0 ( w 0 ) > 0 . Since r is Q -functional, there exists a unique w 1 with ( w 0 , w 1 ) ∈ r and Q 1 ( w 1 ) > 0 . Since r − 1 is also Q -functional, there are no other w ′ 0 with ( w ′ 0 , w 1 ) ∈ r and Q 0 ( w ′ 0 ) > 1 . So, among the elements of non-zero measure, w 0 and w 1 are related only to each other. Then since r is Q -preserving, Q 0 ( w 0 ) ≤ Q 1 ( r ( w 0 ) = Q 1 ( w 1 ) + 0 , and Q 1 ( w 1 ) ≤ Q 0 ( r − 1 ( w 0 ) ) = Q 0 ( w 0 ) + 0 . Hence Q 0 ( w 0 ) = Q 1 ( w 1 ) . ↩︎ This will be a minimum, not an infimum. Let ( Q ′ 0 , Q ′ 1 ) be an r -compatible pair with L ( r , Q ′ 0 , Q ′ 1 ) = μ . Then if we restrict to pairs ( Q ′ 0 , Q ′ 1 ) with L ( r , Q ′ 0 , Q ′ 1 ) ≤ μ , this is a compact non-empty set, so L ( r , − , − ) must reach its minimum on this set. ↩︎ For r a relation between M 0 = ( F 0 , Q 0 ) and M 1 = ( F 1 , Q 1 ) , let Q r be the set of r -compatible ( Q ′ 0 , Q ′ 1 ) that minimises L ( r , Q ′ 0 , Q ′ 1 ) . Hence L ( r , − , − ) = L ( r ) on Q r . So we have this non-empty Q r ; what we'll show is that, if r is Q -relational, then there is a Q ′ 1 such that ( Q 0 , Q ′ 1 ) ∈ Q r . We'll need the following lemma: Lemma A: For any ( Q ′ 0 , Q ′ 1 ) in Q r with | | Q 0 − Q ′ 0 | | 1 > 0 , we can find another pair ( Q ′′ 0 , Q ′′ 1 ) ∈ Q r with Q ′′ 0 closer (in the l 1 norm) to Q 0 than Q ′ 0 is. To prove the lemma, pick any ( Q ′ 0 , Q ′ 1 ) ∈ Q r with | | Q 0 − Q ′ 0 | | 1 > 0 .
That l 1 norm is a sum of positive terms, so there must exist a w 0 ∈ W 0 with | Q 0 ( w 0 ) − Q ′ 0 ( w 0 ) | > 0 . Assume first that Q 0 ( w 0 ) < Q ′ 0 ( w 0 ) . Then, since Q ′ 0 ( w 0 ) > 0 and r is a Q -preserving morphism between Q ′ 0 and Q ′ 1 , there is an underlying model M r = ( F 0 ∪ F 1 , Q r ) so that Q ′ 0 ( w 1 ) = ∑ ( w 0 , w 1 ) ∈ r Q r ( w 0 , w 1 ) > 0 . Thus there is a ( w 0 , w 1 ) ∈ r with Q r ( w 0 , w 1 ) > 0 . Pick ϵ > 0 to be less than Q r ( w 0 , w 1 ) and | Q 0 ( w 0 ) − Q ′ 0 ( w 0 ) | , and define: Q ′′ 0 ( w 0 ) = Q ′ 0 ( w 0 ) − ϵ Q ′′ 1 ( w 1 ) = Q ′ 1 ( w 1 ) − ϵ , with Q ′′ 0 = Q ′ 0 and Q ′′ 1 = Q ′ 1 on all other points. Because Q ′′ 0 ( w 0 ) is closer to Q 0 ( w 0 ) (by ϵ ) than Q 0 is, | | Q 0 − Q ′′ 0 | | 1 = | | Q 0 − Q ′′ 0 | | 1 − ϵ . Furthermore, r is Q -preserving between Q ′′ 0 and Q ′′ 1 (the underlying model has the same Q r except increased by ϵ on ( w 0 , w 1 ) ), and | | Q 1 − Q ′′ 1 | | 1 has gone up by at most ϵ over | | Q 1 − Q ′ 1 | | 1 ; thus the sum | | Q 0 − Q ′′ 0 | | 1 + | | Q 1 − Q ′′ 1 | | 1 has not increased. Hence ( Q ′′ 0 , Q ′′ 1 ) ∈ Q r . Now consider the other case: Q 0 ( w 0 ) > Q ′ 0 ( w 0 ) . Then since Q 0 ( w 0 ) > 0 and r is Q -relational, there must exist a ( w 0 , w 1 ) ∈ r . We define Q ′′ 0 and Q ′′ 1 as above, except that we add ϵ instead of subtracting it; the rest of the argument is the same. This proves the lemma □ . Back to the main proof. Since Q r is compact, the l 1 distance to Q 0 must reach a minimum on Q r . By lemma A, this minimum can only be 0 (since if it were greater than 0 , we could find a pair with a smaller l 1 distance to Q 0 ). If ( Q ′ 0 , Q ′ 1 ) ∈ Q r is a pair on which it reaches this minimum, we must have | | Q 0 − Q ′ 0 | | l = 0 , ie Q ′ 0 = Q 0 . Now assume r is Q -birelational between M 0 and M 1 , while p is Q -birelational between M 1 and M 2 . Then L ( r ) + L ( p ) = L ( r − 1 ) + L ( p ) . Since r − 1 and p are Q -relational, there exists Q ′ 0 and Q ′ 2 such that this is L ( r − 1 , Q 1 , Q ′ 0 ) + L ( p , Q 1 , Q ′ 2 ) , and ( Q ′ 0 , Q 1 ) is r -compatible, while ( Q 1 , Q ′ 2 ) is p -compatible. This implies that ( Q ′ 0 , Q ′ 2 ) is p r -compatible, and thus L ( p r , Q ′ 0 , Q ′ 2 ) ≥ L ( p r ) . However, L ( r − 1 , Q 1 , Q ′ 0 ) + L ( p , Q 1 , Q ′ 2 ) = | | Q 0 − Q ′ 0 | | 1 + 0 + 0 + | | Q 2 − Q ′ 2 | | 1 = L ( p r , Q ′ 0 , Q ′ 2 ) , giving our result: L ( p r ) ≤ L ( r ) + L ( p ) . Finally, notice that L ( r ) = 0 implies that there exists an r compatible ( Q ′ 0 , Q ′ 1 ) with | | Q 0 − Q ′ 0 | | 1 = 0 and | | Q 1 − Q ′ 1 | | 1 = 0 . Thus ( Q 0 , Q 1 ) themselves are r -compatible, ie r is Q -preserving. Conversely, if ( Q 0 , Q 1 ) are r -compatible, then L ( r ) ≤ | | Q 0 − Q 0 | | 1 + | | Q 1 − Q 1 | | 1 = 0 , and thus L ( r ) = 0 . ↩︎ Note that this means that many values of T are impossible in this model, such as 7 and 10 , which cannot be expressed as the product of integers 4 or less. ↩︎